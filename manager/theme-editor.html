<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸»é¡Œç·¨è¼¯å™¨</title>
    <style>
        * { box-sizing: border-box; }
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }

        .subtitle {
            color: #7f8c8d;
            margin-bottom: 30px;
        }

        .section {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #ecf0f1;
            border-radius: 10px;
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #34495e;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #2c3e50;
        }

        .form-input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: #3498db;
        }

        .color-picker-group {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .color-input {
            width: 60px;
            height: 40px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
        }

        .color-preview {
            flex: 1;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .message-list {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            min-height: 100px;
        }

        .message-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }

        .message-item input {
            flex: 1;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin: 5px;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
        }

        .btn-success {
            background: #2ecc71;
            color: white;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .btn-sm {
            padding: 5px 15px;
            font-size: 0.9rem;
        }

        .preview-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .preview-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .preview-box {
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .slider-group {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .slider {
            flex: 1;
            height: 6px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
        }

        .slider-value {
            min-width: 60px;
            text-align: center;
            font-weight: bold;
            color: #3498db;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #ecf0f1;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border-left: 4px solid #28a745;
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border-left: 4px solid #17a2b8;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¨ ä¸»é¡Œç·¨è¼¯å™¨</h1>
        <p class="subtitle">åœ–å½¢åŒ–ç·¨è¼¯ theme.jsonï¼Œç„¡éœ€å¯«ç¨‹å¼</p>

        <div class="alert alert-info">
            <strong>ğŸ’¡ æç¤ºï¼š</strong> ä¿®æ”¹è¨­å®šå¾Œï¼Œå¯å³æ™‚é è¦½æ•ˆæœã€‚å®Œæˆå¾Œé»æ“Šã€ŒåŒ¯å‡º JSONã€å³å¯ä¸‹è¼‰ theme.json æª”æ¡ˆã€‚
        </div>

        <div style="margin-bottom: 20px;">
            <button class="btn btn-primary" onclick="document.getElementById('loadFile').click()">
                ğŸ“‚ è¼‰å…¥ç¾æœ‰ theme.json
            </button>
            <button class="btn btn-success" onclick="exportTheme()">
                ğŸ’¾ åŒ¯å‡º theme.json
            </button>
            <button class="btn btn-danger" onclick="resetTheme()">
                ğŸ”„ é‡ç½®ç‚ºé è¨­å€¼
            </button>
            <input type="file" id="loadFile" accept=".json" style="display: none;">
        </div>

        <!-- é¡è‰²é…ç½® -->
        <div class="section">
            <div class="section-title">ğŸ¨ é¡è‰²é…ç½®</div>
            
            <div class="form-group">
                <label class="form-label">ç©å®¶ 1 é¡è‰²</label>
                <div class="color-picker-group">
                    <input type="color" id="colorPlayer1" class="color-input" value="#FF6B6B">
                    <div class="color-preview" id="previewPlayer1">Player 1</div>
                    <input type="text" id="colorPlayer1Text" class="form-input" value="#FF6B6B" style="width: 100px;">
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">ç©å®¶ 2 é¡è‰²</label>
                <div class="color-picker-group">
                    <input type="color" id="colorPlayer2" class="color-input" value="#4ECDC4">
                    <div class="color-preview" id="previewPlayer2">Player 2</div>
                    <input type="text" id="colorPlayer2Text" class="form-input" value="#4ECDC4" style="width: 100px;">
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">æˆåŠŸé¡è‰²</label>
                <div class="color-picker-group">
                    <input type="color" id="colorSuccess" class="color-input" value="#2ecc71">
                    <div class="color-preview" id="previewSuccess">æ­£ç¢º âœ“</div>
                    <input type="text" id="colorSuccessText" class="form-input" value="#2ecc71" style="width: 100px;">
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">éŒ¯èª¤é¡è‰²</label>
                <div class="color-picker-group">
                    <input type="color" id="colorDanger" class="color-input" value="#e74c3c">
                    <div class="color-preview" id="previewDanger">éŒ¯èª¤ âœ—</div>
                    <input type="text" id="colorDangerText" class="form-input" value="#e74c3c" style="width: 100px;">
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">ä¸»è¦é¡è‰²</label>
                <div class="color-picker-group">
                    <input type="color" id="colorPrimary" class="color-input" value="#3498db">
                    <div class="color-preview" id="previewPrimary">ä¸»è¦è‰²</div>
                    <input type="text" id="colorPrimaryText" class="form-input" value="#3498db" style="width: 100px;">
                </div>
            </div>
        </div>

        <!-- å­—é«”è¨­å®š -->
        <div class="section">
            <div class="section-title">ğŸ“ å­—é«”è¨­å®š</div>
            
            <div class="form-group">
                <label class="form-label">æ¨™é¡Œå¤§å°</label>
                <div class="slider-group">
                    <input type="range" id="fontTitle" class="slider" min="1" max="4" step="0.1" value="2">
                    <span class="slider-value" id="fontTitleValue">2rem</span>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">é¡Œç›®å¤§å°</label>
                <div class="slider-group">
                    <input type="range" id="fontQuestion" class="slider" min="1" max="3" step="0.1" value="1.8">
                    <span class="slider-value" id="fontQuestionValue">1.8rem</span>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">ç­”æ¡ˆå¤§å°</label>
                <div class="slider-group">
                    <input type="range" id="fontAnswer" class="slider" min="0.8" max="2.5" step="0.1" value="1.6">
                    <span class="slider-value" id="fontAnswerValue">1.6rem</span>
                </div>
            </div>
        </div>

        <!-- éŠæˆ²è¨Šæ¯ -->
        <div class="section">
            <div class="section-title">ğŸ’¬ éŠæˆ²è¨Šæ¯</div>
            
            <div class="form-group">
                <label class="form-label">å‹åˆ©è¨Šæ¯</label>
                <div class="message-list" id="winMessages"></div>
                <button class="btn btn-primary btn-sm" onclick="addMessage('win')">â• æ–°å¢å‹åˆ©è¨Šæ¯</button>
            </div>

            <div class="form-group">
                <label class="form-label">å¤±æ•—è¨Šæ¯</label>
                <div class="message-list" id="loseMessages"></div>
                <button class="btn btn-primary btn-sm" onclick="addMessage('lose')">â• æ–°å¢å¤±æ•—è¨Šæ¯</button>
            </div>

            <div class="form-group">
                <label class="form-label">å¹³æ‰‹è¨Šæ¯</label>
                <div class="message-list" id="drawMessages"></div>
                <button class="btn btn-primary btn-sm" onclick="addMessage('draw')">â• æ–°å¢å¹³æ‰‹è¨Šæ¯</button>
            </div>
        </div>

        <!-- ä½ˆå±€è¨­å®š -->
        <div class="section">
            <div class="section-title">ğŸ“ ä½ˆå±€è¨­å®š</div>
            
            <div class="form-group">
                <label class="form-label">é¡Œç›®åœ–ç‰‡æœ€å¤§é«˜åº¦</label>
                <div class="slider-group">
                    <input type="range" id="imageHeight" class="slider" min="150" max="400" step="10" value="250">
                    <span class="slider-value" id="imageHeightValue">250px</span>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">é¸é …æœ€å°é«˜åº¦</label>
                <div class="slider-group">
                    <input type="range" id="optionHeight" class="slider" min="50" max="120" step="5" value="70">
                    <span class="slider-value" id="optionHeightValue">70px</span>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">åœ“è§’å¤§å°</label>
                <div class="slider-group">
                    <input type="range" id="borderRadius" class="slider" min="0" max="30" step="1" value="12">
                    <span class="slider-value" id="borderRadiusValue">12px</span>
                </div>
            </div>
        </div>

        <!-- é è¦½ -->
        <div class="preview-section">
            <div class="preview-title">ğŸ” å³æ™‚é è¦½</div>
            
            <div class="preview-box" id="previewBox1" style="background: #FF6B6B;">
                ç©å®¶ 1 å€åŸŸ
            </div>

            <div class="preview-box" id="previewBox2" style="background: #4ECDC4;">
                ç©å®¶ 2 å€åŸŸ
            </div>

            <div class="preview-box" id="previewBox3" style="background: #2ecc71; color: white;">
                ç­”å°æ•ˆæœ âœ“
            </div>

            <div id="messagePreview" style="padding: 15px; background: white; border-radius: 8px; margin-top: 15px;">
                <strong>è¨Šæ¯é è¦½ï¼š</strong>
                <div id="messagePreviewContent" style="margin-top: 10px; font-style: italic; color: #555;"></div>
            </div>
        </div>
    </div>

    <script>
        let themeData = {
            colors: {
                primary: "#3498db",
                secondary: "#e74c3c",
                success: "#2ecc71",
                danger: "#e74c3c",
                warning: "#f39c12",
                player1: "#FF6B6B",
                player2: "#4ECDC4",
                background: "#f7f9fc",
                menuBackground: "#ffffff",
                dividerBackground: "#ecf0f1"
            },
            typography: {
                fontFamily: "'Segoe UI', sans-serif",
                titleFontSize: "2rem",
                questionFontSize: "1.8rem",
                answerFontSize: "1.6rem",
                menuFontSize: "1.1rem",
                scoreFontSize: "1.4rem"
            },
            layout: {
                questionImageMaxHeight: "250px",
                optionImageMaxHeight: "160px",
                optionGridColumns: 2,
                optionMinHeight: "70px",
                optionGap: "10px",
                borderRadius: "12px"
            },
            messages: {
                win: [
                    "ä½ æ˜¯é§æ³¢å¤§å¸«",
                    "è«§éŸ³æ³›éŸ³å¦‚æ•¸å®¶ç",
                    "ä¸æ˜¯æ³›æ³›ä¹‹è¼©å»æ˜¯æ³›éŸ³å°å¤©æ‰",
                    "è«§éŸ³è€¿å¤§å¸«"
                ],
                lose: [
                    "è€å¸«åœ¨è¬›ä½ æœ‰åœ¨è½å—~",
                    "æ˜¯ä¸æ˜¯è©²çœ‹é»æ›¸äº†",
                    "å¤±æ•—ç‚ºæˆåŠŸä¹‹æ¯ï¼Œå†ä¾†ä¸€æ¬¡ï¼",
                    "å·®ä¸€é»é»å°±é–‹ç«…äº†ï¼",
                    "åŠ æ²¹ï¼Œç‰©ç†ä¹‹ç¥åœ¨ç­‰ä½ è¦ºé†’"
                ],
                draw: [
                    "é‚£é‚„ä¸å†ä¸€å±€?",
                    "é‚„æ˜¯è¦‹å¥½å°±æ”¶!"
                ],
                feedback: {
                    correct: "âœ“",
                    wrong: "âœ—",
                    waiting: "å‹•ä½œçœŸå¿«!ç­‰å¾…å°æ‰‹...",
                    combo: "COMBO x{count}",
                    brokenVoice: "ç ´éŸ³å•¦"
                }
            }
        };

        // åˆå§‹åŒ–
        function init() {
            setupColorPickers();
            setupSliders();
            renderMessages('win');
            renderMessages('lose');
            renderMessages('draw');
            updateAllPreviews();
            
            document.getElementById('loadFile').addEventListener('change', loadThemeFile);
        }

        function setupColorPickers() {
            const colors = [
                { id: 'Player1', key: 'player1' },
                { id: 'Player2', key: 'player2' },
                { id: 'Success', key: 'success' },
                { id: 'Danger', key: 'danger' },
                { id: 'Primary', key: 'primary' }
            ];

            colors.forEach(({ id, key }) => {
                const picker = document.getElementById(`color${id}`);
                const text = document.getElementById(`color${id}Text`);
                const preview = document.getElementById(`preview${id}`);

                picker.addEventListener('input', (e) => {
                    const color = e.target.value;
                    text.value = color;
                    preview.style.background = color;
                    themeData.colors[key] = color;
                    updateAllPreviews();
                });

                text.addEventListener('input', (e) => {
                    const color = e.target.value;
                    if (/^#[0-9A-F]{6}$/i.test(color)) {
                        picker.value = color;
                        preview.style.background = color;
                        themeData.colors[key] = color;
                        updateAllPreviews();
                    }
                });
            });
        }

        function setupSliders() {
            const sliders = [
                { id: 'fontTitle', key: 'titleFontSize', unit: 'rem' },
                { id: 'fontQuestion', key: 'questionFontSize', unit: 'rem' },
                { id: 'fontAnswer', key: 'answerFontSize', unit: 'rem' },
                { id: 'imageHeight', key: 'questionImageMaxHeight', unit: 'px' },
                { id: 'optionHeight', key: 'optionMinHeight', unit: 'px' },
                { id: 'borderRadius', key: 'borderRadius', unit: 'px' }
            ];

            sliders.forEach(({ id, key, unit }) => {
                const slider = document.getElementById(id);
                const valueDisplay = document.getElementById(`${id}Value`);

                slider.addEventListener('input', (e) => {
                    const value = e.target.value + unit;
                    valueDisplay.textContent = value;
                    
                    if (unit === 'rem') {
                        themeData.typography[key] = value;
                    } else {
                        themeData.layout[key] = value;
                    }
                    
                    updateAllPreviews();
                });
            });
        }

        function renderMessages(type) {
            const container = document.getElementById(`${type}Messages`);
            container.innerHTML = '';
            
            themeData.messages[type].forEach((msg, idx) => {
                const div = document.createElement('div');
                div.className = 'message-item';
                div.innerHTML = `
                    <input type="text" value="${msg}" onchange="updateMessage('${type}', ${idx}, this.value)">
                    <button class="btn btn-danger btn-sm" onclick="removeMessage('${type}', ${idx})">åˆªé™¤</button>
                `;
                container.appendChild(div);
            });
        }

        function addMessage(type) {
            themeData.messages[type].push('æ–°è¨Šæ¯');
            renderMessages(type);
        }

        function removeMessage(type, idx) {
            themeData.messages[type].splice(idx, 1);
            renderMessages(type);
        }

        function updateMessage(type, idx, value) {
            themeData.messages[type][idx] = value;
            updateAllPreviews();
        }

        function updateAllPreviews() {
            // æ›´æ–°é¡è‰²é è¦½
            document.getElementById('previewBox1').style.background = themeData.colors.player1;
            document.getElementById('previewBox2').style.background = themeData.colors.player2;
            document.getElementById('previewBox3').style.background = themeData.colors.success;

            // æ›´æ–°è¨Šæ¯é è¦½
            const previewContent = document.getElementById('messagePreviewContent');
            previewContent.innerHTML = `
                <div style="margin: 5px 0; color: #2ecc71;">âœ… å‹åˆ©: ${themeData.messages.win[0]}</div>
                <div style="margin: 5px 0; color: #e74c3c;">âŒ å¤±æ•—: ${themeData.messages.lose[0]}</div>
                <div style="margin: 5px 0; color: #f39c12;">â– å¹³æ‰‹: ${themeData.messages.draw[0]}</div>
            `;
        }

        function exportTheme() {
            const dataStr = JSON.stringify(themeData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'theme.json';
            link.click();
            URL.revokeObjectURL(url);
            
            alert('âœ… theme.json å·²åŒ¯å‡ºï¼');
        }

        function loadThemeFile(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    const loaded = JSON.parse(e.target.result);
                    themeData = loaded;
                    
                    // æ›´æ–°æ‰€æœ‰æ§åˆ¶é …
                    document.getElementById('colorPlayer1').value = themeData.colors.player1;
                    document.getElementById('colorPlayer1Text').value = themeData.colors.player1;
                    document.getElementById('colorPlayer2').value = themeData.colors.player2;
                    document.getElementById('colorPlayer2Text').value = themeData.colors.player2;
                    document.getElementById('colorSuccess').value = themeData.colors.success;
                    document.getElementById('colorSuccessText').value = themeData.colors.success;
                    document.getElementById('colorDanger').value = themeData.colors.danger;
                    document.getElementById('colorDangerText').value = themeData.colors.danger;
                    document.getElementById('colorPrimary').value = themeData.colors.primary;
                    document.getElementById('colorPrimaryText').value = themeData.colors.primary;

                    document.getElementById('fontTitle').value = parseFloat(themeData.typography.titleFontSize);
                    document.getElementById('fontQuestion').value = parseFloat(themeData.typography.questionFontSize);
                    document.getElementById('fontAnswer').value = parseFloat(themeData.typography.answerFontSize);
                    
                    document.getElementById('imageHeight').value = parseInt(themeData.layout.questionImageMaxHeight);
                    document.getElementById('optionHeight').value = parseInt(themeData.layout.optionMinHeight);
                    document.getElementById('borderRadius').value = parseInt(themeData.layout.borderRadius);

                    renderMessages('win');
                    renderMessages('lose');
                    renderMessages('draw');
                    updateAllPreviews();
                    
                    alert('âœ… ä¸»é¡Œå·²è¼‰å…¥ï¼');
                } catch (err) {
                    alert('âŒ è¼‰å…¥å¤±æ•—: ' + err.message);
                }
            };
            reader.readAsText(file);
        }

        function resetTheme() {
            if (confirm('ç¢ºå®šè¦é‡ç½®ç‚ºé è¨­å€¼å—ï¼Ÿæ‰€æœ‰ä¿®æ”¹å°‡éºå¤±ã€‚')) {
                location.reload();
            }
        }

        // é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–
        window.addEventListener('load', init);
    </script>
</body>
</html>
